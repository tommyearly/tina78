"use strict";var _monoNav={init:function(){$(".module.nav").each(function(t,i){$(i).mononav(_monoLoader.utils.makeOptionsObj($(i).attr("data-settings")))})}};!function(t,i,n){var e=function(i,e){var a={push:!1,direction:"left"};this.$nav=t(i),this.$window=t(n),this.$body=t("body"),this.$skipNavigation=t(".skipNavigation"),this.$wrapper=t("body > div:first"),this.clickEvent="click.mononav",this.windowWidth=t(n).width(),this.options=t.extend({},a,e),this.noScrollClass=n.navigator.userAgent.match(/(iPad|iPhone|iPod|Safari)/g)&&!n.navigator.userAgent.match(/Chrome/g)?"safariNoScroll":"noScroll",this.tabbableElements=t("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable], .nav li"),this.init()};e.prototype={init:function(){this.hasNav=this.$nav.length,i.touchevents&&(this.clickEvent=n.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?this.clickEvent+" touchstart.mononav":this.clickEvent+" tap.mononav"),this.hasNav&&(this.buildNav(),this.openActiveParents(),this.bindDropdownEvent(),this.bindOpenEvent(),this.bindCloseEvent(),this.bindResizeEvent(),this.bindKeyboardEvent(this.$nav.attr("data-keyboard")),this.doubleTapToGo(this.$nav.find("li:has(ul)")),this.addSkipClickEvent())},buildNav:function(){var i=this;if(this.$navList=this.$nav.find("> ul"),this.$listItems=this.$navList.find("li"),t('<li class="closeBtn" title="Close Menu" aria-label="Close Menu" aria-hidden="true" role="button" tabindex="-1">').prependTo(this.$navList).on(this.clickEvent,t.proxy(this.closeMenu,this)),this.$listItems.each(function(n,e){var a=t(e).find("a:first").text()+" links";if(t(e).find("> ul").length){var s="navUl_"+n;t(e).addClass("hasChildren").attr("role","link").append('<a title="'+a+'" aria-label="'+a+'" class="dropIco" />'),t(e).find("a.dropIco").on("focusin focusout",i.dropdownFocus);var o=t(e).find("> ul");i.setSubmenuPosition(o),o.attr("aria-labelledby",s),o.attr("id",s),i.isBurgerMenu()?(i.$nav.attr("role","button"),i.$nav.attr("tabindex","0"),i.$nav.find("navContainer").attr("role","presentation")):(o.attr("role","menu"),o.find("li").find("a").attr("role","menuitem")),i.$window.on("resize",function(){i.setSubmenuPosition(t(document.getElementById(s)))})}t(e).parent().hasClass("navContainer")?(t(e).attr("tabindex",0),t(e).find("a").attr("tabindex",-1),t(e).find("a.dropIco").attr("tabindex",0),t(e).find("a").attr("aria-label",a),t(e).find("li").find("a").attr("role","menuitem")):t(e).attr("tabindex",-1),i.isBurgerMenu()&&t(e).attr("aria-hidden","true").attr("tabindex","-1"),i.$window.on("resize.mononav",function(){i.isBurgerMenu()&&t(e).attr("aria-hidden","true").attr("tabindex","-1")}),t(e).hasClass("active")&&t(e).attr("aria-current","page")}),!this.isBurgerMenu()&&this.$nav.find(".navContainer li > ul li").length&&t("body").find(".bgfilter").length){var n=!!this.$nav.closest(".col.bgfilter").length;t("nav ul.navContainer li.hasChildren").on({mouseenter:function(i){var e=i.currentTarget.closest("nav"),a=n?t(e).parent():t(e).closest(".container");a.css("z-index","4")},mouseleave:function(i){var e=i.currentTarget.closest("nav"),a=n?t(e).parent():t(e).closest(".container");a.css("z-index","")}})}},setSubmenuPosition:function(i){if(i&&i.length){var n=i[0],e=t(n.parentElement),a="firstSubmenuLeft";document.documentElement.clientWidth-n.parentElement.getBoundingClientRect().right-n.clientWidth<0?(e.parent().hasClass("navContainer")||(e.parent().find("> li").css("text-align","right"),a="left"),i.attr("class",a),e.find("a").eq(0).attr("class","naviLeft")):(e.parent().hasClass("navContainer")||(e.parent().find("> li").removeAttr("style"),a="left"),i.removeAttr("class",a),e.find("a").eq(0).removeAttr("class","naviLeft"))}},dropdownFocus:function(){t(this).parent().toggleClass("hover")},openActiveParents:function(){this.$listItems.filter(".active").parents(".hasChildren").addClass("showChildren"),this.setVisibleListsTabbable()},bindDropdownEvent:function(){this.$listItems.filter(".hasChildren").find(".dropIco").on(this.clickEvent,function(i){i.preventDefault(),i.stopImmediatePropagation(),t(this).parent().toggleClass("showChildren");var n=t(this).parent().hasClass("showChildren");t(this).parent().attr("aria-expanded",n)})},bindOpenEvent:function(){var i=this;this.$nav.on(this.clickEvent,function(n){n.target==this&&!i.$nav.hasClass("opened-menu")&&n.cancelable&&(n.stopImmediatePropagation(),n.preventDefault(),i.openMenu(n),t(this).attr("aria-expanded","true"))})},bindKeyboardEvent:function(i){var e=this,a=this;if(i){var s=Object.freeze({TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,HOME:36,END:35});this.$nav.on("keydown",function(t){switch(t.which){case s.ENTER:case s.DOWN:case s.UP:case s.SPACE:t.stopImmediatePropagation(),t.preventDefault()}}),this.$nav.on("keyup",function(i){var o=t(i.target);switch(i.which){case s.ENTER:case s.SPACE:if(i.stopImmediatePropagation(),i.preventDefault(),o.hasClass("hasChildren"))o.parent(".hasChildren").siblings(".hasChildren").removeClass("showChildren"),o.parent().toggleClass("showChildren"),o.toggleClass("hover"),o.parent().hasClass("showChildren")?(e.toggleTabbingOnPage(!1),o.find("> ul > li").attr("aria-hidden",!1).first().trigger("focus")):(o.find("> ul > li").attr("aria-hidden",!0),e.toggleTabbingOnPage(!0));else if(o.is(".closeBtn"))e.closeMenu(i);else if(o.is(".module.nav"))e.openMenu(i);else{var r=o.find("a").attr("href");r&&(n.location=r)}break;case s.ESC:e.closeMenu(i),o=o.closest(".hover"),o.removeClass("hover"),e.toggleAttribute(o.find("ul")[0],"aria-expanded"),e.applyNavFocus(a.$nav)?o.closest("li").trigger("focus"):e.isBurgerMenu()||o.closest("li").trigger("focus"),e.$nav.find("li.hasChildren").removeClass("showChildren"),e.toggleTabbingOnPage(!0);break;case s.DOWN:e.applyNavFocus(a.$nav)?o.next().trigger("focus"):e.isBurgerMenu()||o.next().trigger("focus");break;case s.UP:e.applyNavFocus(a.$nav)?o.prev().trigger("focus"):e.isBurgerMenu()||o.prev().trigger("focus");break;case s.HOME:e.applyNavFocus(a.$nav)?o.parent().find("li:first-child").trigger("focus"):e.isBurgerMenu()||o.parent().find("li:first-child").trigger("focus");break;case s.END:e.applyNavFocus(a.$nav)?o.siblings(":not(.closeBtn)").last().trigger("focus"):e.isBurgerMenu()||o.siblings(":not(.closeBtn)").last().trigger("focus");break;case s.TAB:}e.setVisibleListsTabbable()}),this.$listItems.on("keyup",function(i){var n=t(i.target);switch(i.which){case s.RIGHT:i.stopPropagation(),i.preventDefault(),n.hasClass("hasChildren")?(e.openMenu(),n.toggleClass("hover"),e.toggleAttribute(n.find("ul")[0],"aria-expanded"),t(n.find("ul")[0]).find("li:first-child").trigger("focus")):n.next().trigger("focus");break;case s.LEFT:i.stopPropagation(),i.preventDefault(),"menuitem"===n.attr("role")?(e.closeMenu(i),n=n.closest(".hover"),n.removeClass("hover"),e.toggleAttribute(n.find("ul")[0],"aria-expanded"),n.closest("li").trigger("focus")):n.prev().trigger("focus")}})}},applyNavFocus:function(t){return this.isBurgerMenu()&&t.hasClass("opened-menu")},bindResizeEvent:function(){var t=this;this.$window.on("resize.mononav",function(i){return t.windowWidth==t.$window.width()?!1:void(t.$nav.hasClass("opened-menu")&&t.closeMenu(i))})},bindCloseEvent:function(){var i=this;t(document).on(this.clickEvent,function(t){i.$nav.hasClass("opened-menu")&&i.closeMenu(t)}),this.$navList.on(this.clickEvent,function(t){t.stopPropagation()})},openMenu:function(){if(!this.isBurgerMenu())return!1;this.positionStickyEngagementsBehindNavigation(),this.$nav.addClass("opened-menu"),this.$window.width()>767?this.$body.css("overflow-x","hidden"):this.$body.css("overflow","hidden"),this.$nav.closest(".row.bgfilter").css("z-index","3");var i;if(i=this.$window.width()>=1200?80:this.$window.width()>767&&this.$window.width()<=1199?50:0,"left"===this.options.direction?this.$navList.css("left","auto").animate({right:i+"%"},300):this.$navList.css("right","auto").animate({left:i+"%"},300),this.$navList.each(function(){t(this).find('[data-req~="anchor"]').attr("onClick","$('.closeBtn').trigger('click');")}),this.options.push){var e;if(e=this.$window.width()>1200?20:this.$window.width()>767&&this.$window.width()<1199?50:100,this.$window.width()<1199&&this.$body.addClass(this.noScrollClass),"left"===this.options.direction?this.$wrapper.animate({"margin-left":e+"%"},300):this.$wrapper.animate({"margin-left":-e+"%"},300),n.hasOwnProperty("_monoFixedHeader")){var a=t("header.headerFixed");if(a.length){var s=this.$window.width()/100*e;"left"===this.options.direction?a.animate({left:s+parseFloat(a.css("left"))+"px",right:-(s-parseFloat(a.css("right")))+"px"},300):a.animate({right:s+parseFloat(a.css("right"))+"px",left:-(s-parseFloat(a.css("left")))+"px"},300)}}}this.toggleTabbingOnPage(!1),this.$nav.find(".closeBtn").attr("tabindex","0"),this.$nav.find(".showChildren").length?(this.$nav.find(".showChildren > ul > li").attr("aria-hidden","false").attr("tabindex","0"),this.$nav.find(".showChildren .dropIco").attr("tabindex",0)):this.$listItems.each(function(i,n){t(n).parent().hasClass("navContainer")&&(t(n).attr("aria-hidden","false").attr("tabindex","0"),t(n).find("> .dropIco").attr("tabindex","0"))}),this.$nav.find(".dropIco").attr("tabindex","0"),this.applyNavFocus(this.$nav)&&this.$window.width()<768&&this.$nav.find(".closeBtn").attr("tabindex","0").trigger("focus")},closeMenu:function(i){var e=this;i.stopPropagation(),i.stopImmediatePropagation();var a=this;if(this.$nav.hasClass("opened-menu")){if(this.$navList.each(function(){t(this).find('[data-req~="anchor"]').attr("onClick","$('.closeBtn').trigger('click');")}),a.restoreOriginalStickyEngagementPositioning(),this.$body.css("overflow","").css("overflow-x",""),"left"===this.options.direction?this.$navList.css("left","auto").animate({right:"100%"},300,"swing",function(){t(this).css({left:"",right:""}),a.$body.removeClass(a.noScrollClass),a.$nav.removeClass("opened-menu"),a.$nav.closest(".row.bgfilter").css("z-index","")}):this.$navList.css("right","auto").animate({left:"100%"},300,"swing",function(){t(this).css({left:"",right:""}),a.$body.removeClass(a.noScrollClass),a.$nav.removeClass("opened-menu"),a.$nav.closest(".row.bgfilter").css("z-index","")}),this.options.push){this.$body.hasClass(this.noScrollClass)&&this.$wrapper.css({position:"fixed"}),this.$wrapper.animate({"margin-left":""},300,function(){e.$wrapper.css({position:""})});var s=t("header.headerFixed");if(n.hasOwnProperty("_monoFixedHeader")&&s.length){var o=this.$window.width()>767?this.$window.width()/100*20:this.$window.width()/100*90,r=Math.abs(parseFloat(s.css("left"))),l=Math.abs(parseFloat(s.css("right")));"left"===this.options.direction?s.animate({left:r-o+"px",right:o-l+"px"},300):s.animate({left:o-r+"px",right:l-o+"px"},300)}}this.$nav.attr("aria-expanded",this.$nav.hasClass("opened-menu"))}this.toggleTabbingOnPage(!0),this.$nav.find(".closeBtn").attr("tabindex","-1"),this.$listItems.each(function(i,n){t(n).attr("aria-hidden","true").attr("tabindex","-1"),t(n).find("a").attr("tabindex","-1"),e.$nav.trigger("focus")}),this.$nav.find(".dropIco").attr("tabindex","-1")},isBurgerMenu:function(){var t=n._monoLoader.utils.getViewport();return"sm"==t||this.$nav.is('[data-settings*="verticalNav-'+t+'=true"]')||this.$nav.is('[data-settings*="vertical="]')&&!this.$nav.is('[data-settings*="vertical=false"]')?!0:!1},doubleTapToGo:function(i){if(!("ontouchstart"in n||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i)))return!1;var e=this;this.curItem=!1,t(i).on("click",function(i){if(!e.isBurgerMenu()){i.stopImmediatePropagation();var n=t(i.currentTarget);n[0]!=e.curItem[0]&&(i.preventDefault(),e.curItem=n)}}),t(document).on("click touchstart MSPointerDown",function(i){for(var n=!0,a=t(i.target).parents(),s=0;s<a.length;s++)a[s]==e.curItem[0]&&(n=!1);n&&(e.curItem=!1)})},addSkipClickEvent:function(){var i=this;this.$skipNavigation.on("click",function(i){var n=t("#skipNavigationTarget");i.preventDefault(),t(n).attr("tabindex",-1).on("blur focusout",function(){t(n).removeAttr("tabindex")}).trigger("focus"),t([document.documentElement,document.body]).animate({scrollTop:n.offset().top},0)}),this.$skipNavigation.find("a").on("focus",function(){i.$skipNavigation.css("z-index",5)}),this.$skipNavigation.find("a").on("blur",function(){i.$skipNavigation.css("z-index",-1)})},toggleAttribute:function(i,n){var e=t(i).attr(n)||"false";if(e){var a="true"===e?"false":"true";t(i).attr(n,a)}},toggleTabbingOnPage:function(i){var n=i?"0":"-1";this.$nav.find(".dropIco").attr("tabindex",n),t.each(this.tabbableElements,function(i,e){t(e).attr("tabindex",n)}),i&&this.$nav.find("> ul li").each(function(i,n){t(n).parent().hasClass("navContainer")?(t(n).attr("tabindex",0),t(n).find("a").attr("tabindex",-1),t(n).find("a.dropIco").attr("tabindex",0)):t(n).attr("tabindex",-1),t(n).hasClass("active")&&t(n).attr("aria-current","page")}),this.setVisibleListsTabbable()},setVisibleListsTabbable:function(){this.$nav.find("li:visible").attr("tabindex",0),this.$nav.find("li:visible > .dropIco").attr("tabindex",0),this.$nav.find("li[aria-hidden=true]").attr("tabindex",-1),this.$nav.find("li[aria-hidden=true] > .dropIco").attr("tabindex",-1)},positionStickyEngagementsBehindNavigation:function(){t(".stickyEngagementWrapper").css("z-index",4)},restoreOriginalStickyEngagementPositioning:function(){t(".stickyEngagementWrapper").css("z-index","")}},t.fn.mononav=function(i){return this.each(function(){t.data(this,"mononav")||t.data(this,"mononav",new e(this,i))})},_monoNav.init()}(jQuery,Modernizr,window);