"use strict";var _monoAnchor={anchors:$("a[href*='#']:not([href^=http])"),$header:$("header"),$window:$(window),$nav:$(".module.nav"),firstScroll:!1,init:function(){var t=this;this.isInTool=document.body.hasAttribute("data-istool"),this.headerSettings=this.makeOptionsObj(this.$header.attr("data-settings")),$(window).on("hashchange",function(){if(window.location.hash){var e=t.filterVisibleAnchors($('a[name="'+window.location.hash.replace(/#*/,"")+'"]'));e.length&&t.scrollTo(e)}}),$(this.anchors).each(function(e,i){$(i).on("click.anchor",$.proxy(t.anchorHandler,t))}),window.location.hash&&("complete"===document.readyState?this.scrollOnLoad():$(window).on("load",this.scrollOnLoad()))},anchorHandler:function(t){var e=this,i=$(t.currentTarget),n=this.filterVisibleAnchors($(i[0].hash).length?$(i[0].hash):$('a[name="'+i[0].hash.replace(/#/g,"")+'"]'));if(n.length){t.preventDefault(),this.$nav.hasClass("opened-menu")&&this.$nav.find(".closeBtn").trigger("click");var o=setInterval(function(){$("body").hasClass("noScroll")||(clearInterval(o),e.scrollTo(n))},10)}},scrollTo:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,o=this.isInTool?$("html,body").add(this.$window[0].parent.iframeGrids.trDiv):$("html,body"),a=this.getDest(t);if(!i&&a>$(document).scrollTop()){var s=document.body.offsetHeight;$("img[data-lazyload-src]").each(function(e,i){$(i).parents(".module").on("lazyloadFinished",function(){o.stop();var e=document.body.offsetHeight-s,i=(1-$(document).scrollTop()/(a+e))*n;this.scrollTo(t,!0,i)})})}o.animate({scrollTop:a},{duration:n,easing:"swing",step:function(i,n){var o=e.getDest(t);n.end!==o&&(n.end=o)},done:function(){window._monoAnchor.firstScroll&&(window._monoAnchor.firstScroll=!1),setTimeout(function(){$("img[data-lazyload-src]").each(function(t,e){$(e).parents(".module").off("lazyloadFinished")})},250)}}),window.location.hash=window.location.hash.replace(/#*/,"#"),window.location.hash&&window.location.hash=="#"+t.attr("id")||window.history.pushState(null,null,"#"+t.attr("id"))},scrollOnLoad:function(){var t=this,e=window.location.hash.toLowerCase(),i="";if(this.firstScroll=!0,0===e.lastIndexOf("#")){var n=$(e).length&&$(e)[0].classList.contains("rowanchor")&&$(e).is("a");i=this.filterVisibleAnchors(n?$(e):$("a[name="+e.replace(/#/g,"")+"]"))}i.length&&$(".module.gallery, .module.imagelist").filter(":animated").promise().done(function(){t.scrollTo(i)})},getDest:function(t){var e=22.5,i=0,n=t.offset().top,o=parseInt(t.parent().css("padding-top"));i=n-o>$(document).outerHeight(1)-this.$window.height()?$(document).height()-this.$window.height()+e:n-o+e;var a=this.$header.attr("data-req")?this.$header.attr("data-req").indexOf("headerfixed")>-1:!1,s=-1!==this.headerSettings.indexOf("headerminify-"+this.checkVP());if(!this.isInTool&&this.$header.attr("data-req")&&a)if(this.firstScroll)i=this.updateFixedDest(i);else if(s){var r=t.offset().top,h=window.scrollY;if(r>=h&&0!==parseInt(this.$header.css("top")))return i;r+t.parent().outerHeight()+this.$header.outerHeight()>=h&&(i=this.updateFixedDest(i))}else i=this.updateFixedDest(i);return i},updateFixedDest:function(t){var e=!this.headerSettings.length,i=this.headerSettings.indexOf("headerfixed")>-1,n=this.headerSettings.indexOf("headerfixed-"+this.checkVP())>-1;return(e||i||n)&&(t-=this.$header.outerHeight()),t},filterVisibleAnchors:function(t){var e=void 0;return t.text()?e=t.filter(":visible"):(e=t.text("a").filter(":visible"),t.text("")),e},checkVP:function(){return $(window).width()<768?"sm":$(window).width()>768&&$(window).width()<1199?"md":"lg"},makeOptionsObj:function(t){return t?t.split(","):[]}};_monoAnchor.init();